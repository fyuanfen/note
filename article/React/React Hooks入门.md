## å‰è¨€
æœ¬æ–‡æ˜¯å­¦ä¹ React Hooksè®°å½•çš„å­¦ä¹ ç¬”è®°ã€‚
[æ¨èçœ‹ä¸€ä¸‹Dan Abramovçš„åšå®¢](https://overreacted.io/)
## â“ä»€ä¹ˆæ˜¯Hook?ä¸ºä»€ä¹ˆéœ€è¦Hook?

1. é€»è¾‘å¤ç”¨ï¼Œå¦‚æœä½¿ç”¨é«˜é˜¶ç»„ä»¶ç­‰ç‰¹æ€§ï¼Œè¾ƒä¸ºå¤æ‚ã€‚
2. ä¼ ç»Ÿçš„å‡½æ•°ç»„ä»¶æ— æ³•å­˜å‚¨`state`çŠ¶æ€ã€‚
3. `Hooks`å…è®¸åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œè°ƒç”¨`React`çš„åŠŸèƒ½ã€‚
4. ä½¿ç”¨è‡ªå®šä¹‰`Hook`å¯ä»¥ç®€åŒ–é€»è¾‘å¤ç”¨ã€‚
5. `Hooks`æ˜¯`React`çš„æœªæ¥
6. `Hooks`ä¸æ˜¯ä»€ä¹ˆé­”æ³•ã€‚`Hooks`çš„è®¾è®¡ä¹Ÿä¸`React`æ— å…³ã€‚



## useState
`useState`å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œæ·»åŠ state Hookã€‚
è°ƒç”¨useStateä¼šè¿”å›ä¸€ä¸ªstateå˜é‡ï¼Œä»¥åŠæ›´æ–°stateå˜é‡çš„æ–¹æ³•ã€‚useStateçš„å‚æ•°æ˜¯stateå˜é‡çš„åˆå§‹å€¼ï¼Œ**åˆå§‹å€¼ä»…åœ¨åˆæ¬¡æ¸²æŸ“æ—¶æœ‰æ•ˆ**ã€‚
**æ›´æ–°stateå˜é‡çš„æ–¹æ³•ï¼Œå¹¶ä¸ä¼šåƒthis.setStateä¸€æ ·ï¼Œåˆå¹¶stateã€‚è€Œæ˜¯æ›¿æ¢stateå˜é‡ã€‚**
ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­, ä¼šåœ¨é¡µé¢ä¸Šæ¸²æŸ“countçš„å€¼ï¼Œç‚¹å‡»setCountçš„æŒ‰é’®ä¼šæ›´æ–°countçš„å€¼ã€‚
```js
import React, { useState } from 'react';

function Example() {
  // å£°æ˜ä¸€ä¸ªå« "count" çš„ state å˜é‡
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
    </div>
  );
}
```

### å‡½æ•°å¼æ›´æ–°
å¦‚æœæ–°çš„stateéœ€è¦ä¹‹å‰çš„stateè®¡ç®—å¾—åˆ°ã€‚å¯ä»¥å‘useStateè¿”å›çš„æ›´æ–°å‡½æ•°ä¸­ï¼Œä¼ é€’ä¸€ä¸ªå‡½æ•°ã€‚å‡½æ•°çš„å‚æ•°æ˜¯å‰ä¸€ä¸ªstateã€‚
![2019-08-16-16-16-53-2019816](http://images.zyy1217.com/2019-08-16-16-16-53-2019816.png)

### æƒ°æ€§çš„åˆå§‹å€¼
`useState`çš„åˆå§‹å€¼æ˜¯æƒ°æ€§çš„ï¼Œåªä¼šåœ¨åˆæ¬¡æ¸²æŸ“ç»„ä»¶çš„æ—¶å€™èµ·ä½œç”¨ã€‚å¦‚æœstateçš„åˆå§‹å€¼éœ€ç”¨é€šè¿‡å¤æ‚è®¡ç®—å¾—åˆ°ï¼ŒuseStateçš„åˆå§‹å€¼ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼å°†æ˜¯useStateçš„åˆå§‹å€¼ã€‚
![2019-08-16-16-17-58-2019816](http://images.zyy1217.com/2019-08-16-16-17-58-2019816.png)
### è·³è¿‡stateæ›´æ–°
è°ƒç”¨`state`çš„æ›´æ–°å‡½æ•°ï¼Œä¼ å…¥å’Œå½“å‰ä¸€æ ·çš„stateæ—¶ã€‚Reactä¼šè·³è¿‡å­ç»„ä»¶çš„æ¸²æŸ“ï¼Œä»¥åŠeffectçš„æ‰§è¡Œã€‚

![2019-08-16-16-18-30-2019816](http://images.zyy1217.com/2019-08-16-16-18-30-2019816.png)

### å°èŠ‚

1. useStateçš„æ›´æ–°æ˜¯æ›¿æ¢ï¼Œè€Œä¸æ˜¯åˆå¹¶ã€‚
2. useStateå¯ä»¥æ¥æ”¶å‡½æ•°å‚æ•°ï¼Œå¹¶å°†å‡½æ•°çš„è¿”å›å€¼ä½œä¸ºåˆå§‹å€¼
3. useStateçš„æ›´æ–°å‡½æ•°å¯ä»¥æ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå‡½æ•°çš„å‚æ•°æ˜¯å‰ä¸€çŠ¶æ€çš„stateå€¼ã€‚
4. ä½¿ç”¨å½“å‰çš„å€¼ï¼Œå¯¹stateè¿›è¡Œæ›´æ–°ä¸ä¼šè§¦å‘æ¸²æŸ“ã€‚
5. å¯ä»¥ä½¿ç”¨å¤šä¸ªuseStateï¼Œå£°æ˜å¤šä¸ªstateå˜é‡ã€‚

## useEffect
é™¤äº†å®˜æ–¹æ–‡æ¡£å¤–ï¼Œæ¨èé˜…è¯»ä¸€ä¸‹[Um guia completo para useEffect](https://overreacted.io/pt-br/a-complete-guide-to-useeffect/)
`useEffect`å¯ä»¥è®©æˆ‘ä»¬åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œã€‚äº‹ä»¶ç»‘å®šï¼Œæ•°æ®è¯·æ±‚ï¼ŒåŠ¨æ€ä¿®æ”¹`DOM`ã€‚
`useEffect`å°†ä¼šåœ¨**æ¯ä¸€æ¬¡Reactæ¸²æŸ“ä¹‹åæ‰§è¡Œ**ã€‚æ— è®ºæ˜¯åˆæ¬¡æŒ‚è½½æ—¶ï¼Œè¿˜æ˜¯æ›´æ–°ã€‚ï¼ˆå½“ç„¶è¿™ç§è¡Œä¸ºæˆ‘ä»¬å¯ä»¥æ§åˆ¶ï¼‰

![2019-08-16-16-19-33-2019816](http://images.zyy1217.com/2019-08-16-16-19-33-2019816.png)

### éœ€è¦æ¸…é™¤çš„effect
åœ¨ä¼ ç»Ÿçš„`class`ç»„ä»¶ä¸­ï¼Œé€šå¸¸åœ¨`componentDidMount`ä¸­æ·»åŠ å¯¹äº‹ä»¶çš„ç›‘å¬ã€‚åœ¨`componentWillUnmount`ä¸­ä¼šæ¸…é™¤å¯¹äº‹ä»¶çš„ç›‘å¬ã€‚
æˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ï¼Œæ‹†åˆ†æˆ‘ä»¬çš„é€»è¾‘ã€‚
è€Œ`effect`å¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“`react`è¿›è¡Œæ¸…é™¤æ—¶, ä¼šæ‰§è¡Œè¿™ä¸ªè¿”å›çš„å‡½æ•°ã€‚æ¯å½“æ‰§è¡Œæœ¬æ¬¡çš„`effect`æ—¶ï¼Œéƒ½ä¼šå¯¹ä¸Šä¸€ä¸ª`effect`è¿›è¡Œæ¸…é™¤ã€‚ç»„ä»¶å¸è½½æ—¶ä¹Ÿä¼šæ‰§è¡Œè¿›è¡Œæ¸…é™¤ã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‹é¢çš„ä»£ç ä¸­ã€‚æ¯ä¸€æ¬¡æ›´æ–°ï¼Œéƒ½ä¼šå¯¹ä¸Šä¸€æ¬¡çš„`effect`è¿›è¡Œå¸è½½ï¼Œå¹¶æ‰§è¡Œæœ¬æ¬¡çš„`effect`ã€‚

![2019-08-16-16-20-27-2019816](http://images.zyy1217.com/2019-08-16-16-20-27-2019816.png)

### effectæ€§èƒ½ä¼˜åŒ–
æ¯æ¬¡æ‰§è¡Œ`effect`ï¼Œæ¸…é™¤ä¸Šä¸€æ¬¡`effect`å¯èƒ½ä¼šé€ æˆä¸å¿…è¦çš„æ€§èƒ½æµªè´¹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡`effect`çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ§åˆ¶`effect`çš„æ‰§è¡Œã€‚ ç¬¬äºŒä¸ªå‚æ•°æ˜¯`useEffect`çš„ä¾èµ–ï¼Œåªæœ‰å½“ä¾èµ–å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ`useEffect`æ‰ä¼šæ›´æ–°ã€‚
![2019-09-15-21-12-00-2019915](http://images.zyy1217.com/2019-09-15-21-12-00-2019915.png)
å½“æˆ‘ä»¬ä¼ é€’ä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„ä½œä¸ºä¾èµ–æ—¶ï¼Œä¼šå‘Šè¯‰`React`ï¼Œ`effect`ä¸ä¾èµ–ä»»ä½•`state`æˆ–è€…`props`ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­¤è¡Œä¸ºæ¨¡æ‹Ÿ`componentDidMount`æˆ–è€…`componentWillUnmount`ã€‚

âš ï¸ è¯·è®°ä½ä½¿ç”¨ç©ºæ•°ç»„çš„`effect`å’Œ`componentDidMount`æ˜¯æœ‰å·®å¼‚çš„
![2019-09-15-21-12-50-2019915](http://images.zyy1217.com/2019-09-15-21-12-50-2019915.png)


### ğŸ¤”ï¸useEffect(fn, [])å’ŒcomponentDidMountçš„å·®å¼‚æœ‰ä»€ä¹ˆå·®å¼‚ï¼Ÿ
ç±»ä¼¼çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆæœ‰æ—¶å€™åœ¨`effect`é‡Œæ‹¿åˆ°çš„æ˜¯æ—§çš„`state`æˆ–`prop`å‘¢ï¼Ÿ
![2019-09-15-21-14-20-2019915](http://images.zyy1217.com/2019-09-15-21-14-20-2019915.png)

**useEffectä¼šæ•è·props, stateï¼Œä½†æ˜¯å§‹ç»ˆæ˜¯å®šä¹‰æ—¶çš„å€¼**ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“æˆ‘ä»¬ç‚¹å‡»`button`å¤šæ¬¡ï¼Œ`effect`åœ¨3ç§’ä¹‹åçš„å›è°ƒï¼Œæ‰“å°çš„ä¾ç„¶æ˜¯`state`çš„åˆå§‹å€¼ã€‚
#### ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ
è¿™æ˜¯å› ä¸ºjavascripté—­åŒ…çš„æœºåˆ¶ï¼Œå‡½æ•°ç»„ä»¶è¢«è°ƒç”¨åï¼Œå‡½æ•°å†…éƒ¨çš„stateç”±äºè¢«å†…éƒ¨å®šæ—¶å™¨çš„å›è°ƒæ‰€ä¾èµ–ï¼Œæ‰€ä»¥æ²¡æœ‰è¢«åƒåœ¾å›æ”¶æœºåˆ¶æ‰€æ¸…é™¤ï¼Œè€Œæ˜¯ä¿å­˜åœ¨å†…å­˜é‡Œäº†ã€‚æ‰€ä»¥ç­‰å®šæ—¶å™¨çš„å›æ‰æ‰§è¡Œæ—¶ï¼Œæ‰“å°çš„æ˜¯ä¹‹å‰é—­åŒ…ä¸­å­˜å‚¨çš„å˜é‡ã€‚
#### å¦‚ä½•é¿å…æ‹¿åˆ°æ—§çš„propæˆ–è€…stateï¼Ÿ

1. ä½¿ç”¨useRef
2. æŸ¥çœ‹æ˜¯å¦é—æ¼äº†ä¾èµ–, å¯¼è‡´effectæ²¡æœ‰æ›´æ–°

### ğŸ¤”ï¸å¦‚ä½•æ­£ç¡®çš„useEffectä¸­è¯·æ±‚æ•°æ®?
é˜…è¯»è¿™ç¯‡æ–‡ç« æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©[How to fetch data with React Hooks?](https://www.robinwieruch.de/react-hooks-fetch-data)

#### å¦‚ä½•è¯·æ±‚æ•°æ®ï¼Ÿ
![2019-09-15-21-16-26-2019915](http://images.zyy1217.com/2019-09-15-21-16-26-2019915.png)

#### å¦‚ä½•åœ¨useEffectä¸­ä½¿ç”¨async/await?
`async`å‡½æ•°é»˜è®¤ä¼šè¿”å›ä¸€ä¸ª`Promise`å¯¹è±¡ï¼Œè€Œ`useEffect`ä¸­ï¼Œåªå…è®¸ä»€ä¹ˆéƒ½ä¸è¿”å›æˆ–è€…è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚æ§åˆ¶å°ä¸­ï¼Œä¼šè§¦å‘å¦‚ä¸‹è­¦å‘Š
**Warning: useEffect function must return a cleanup function or nothing. Promises and useEffect(async () => â€¦) are not supported, but you can call an async function inside an effect.. **
è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ğŸ‘‡
![2019-09-15-21-17-18-2019915](http://images.zyy1217.com/2019-09-15-21-17-18-2019915.png)
### å°èŠ‚

1. å¯ä»¥ä½¿ç”¨å¤šä¸ª`useEffect`åˆ†ç¦»é€»è¾‘ã€‚åœ¨`class`ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨`componentDidMount`ä¸­ï¼Œæ··æ‚æ·»åŠ äº‹ä»¶ç»‘å®šï¼Œè¯·æ±‚æ•°æ®ç­‰å¤šç§æ— å…³çš„é€»è¾‘ã€‚
2. å¦‚æœåªéœ€è¦`useEffect`åœ¨åŠ è½½æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œæˆ–è€…å¸è½½ç»„ä»¶æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œå¯ä»¥å‘`useEffect`ä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„ã€‚
3. `useEffect`ä¸æ”¯æŒç›´æ¥ä½¿ç”¨asyncå‡½æ•°
4. å¦‚æœåœ¨`useEffect`ä¸­å½¢æˆäº†é—­åŒ…ï¼Œå°†ä¼šæ‹¿åˆ°æ—§çš„`props`ï¼Œæˆ–è€…`state`ã€‚ï¼ˆè¿™ä¸ªä¸`Hook`æ— å…³ï¼Œä¸å‡½æ•°ç»„ä»¶æœ¬èº«çš„ç‰¹æ€§ç›¸å…³ï¼‰
5. `useEffect`è¿”å›çš„å‡½æ•°â€”â€”æ¸…é™¤å‡½æ•°ã€‚ä¼šåœ¨ä¸Šä¸€ä¸ª`effect`è¢«æ¸…é™¤æ—¶è°ƒç”¨ã€‚

## ğŸ“°Hookè§„åˆ™

1. åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨Hookï¼Œä¸åœ¨åˆ¤æ–­ï¼Œå¾ªç¯è¯­å¥ä¸­ä½¿ç”¨Hook
2. åªåœ¨Reactå‡½æ•°ä¸­ä½¿ç”¨Hook

### ğŸ¤”ï¸ä¸ºä»€ä¹ˆHooké«˜åº¦ä¾èµ–æ‰§è¡Œé¡ºåºï¼Ÿ
æˆ‘ä»¬å€ŸåŠ©`preact`çš„æºç è¿›è¡Œåˆ†æï¼Œåœ¨`preact`ä¸­`Hook`çš„å­˜å‚¨åœ¨ç»„ä»¶çš„ç§æœ‰å±æ€§`__hooks._list`çš„æ•°ç»„ä¸­ã€‚è¯»å–å’Œå­˜å‚¨éƒ½ä¾èµ–`currentIndex`çš„æŒ‡é’ˆï¼Œå¦‚æœ`hook`çš„æ‰§è¡Œé¡ºåºæ”¹å˜ï¼Œ`currentIndex`ä¹Ÿä¼šè¢«æ”¹å˜ï¼Œè·å–çš„`hook`å¯èƒ½æ˜¯å®Œæˆé”™è¯¯çš„ã€‚
![2019-09-15-21-19-40-2019915](http://images.zyy1217.com/2019-09-15-21-19-40-2019915.png)


## è‡ªå®šä¹‰Hook

1. è‡ªå®šä¹‰`Hook`å¿…é¡»ä»¥`use`å¼€å¤´
2. è‡ªå®šä¹‰`Hook`åªæ˜¯é€»è¾‘å¤ç”¨ï¼Œå…¶ä¸­çš„`state`æ˜¯ä¸ä¼šå…±äº«çš„ã€‚
3. è‡ªå®šä¹‰Hookå†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»–`Hook`ã€‚
4. é¿å…è¿‡æ—©çš„æ‹†åˆ†æŠ½è±¡é€»è¾‘

ä¸‹é¢æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰`Hook`çš„ğŸŒ°
### ğŸ’¡è‡ªå®šä¹‰æ•°æ®è·å–Hook
æˆ‘ä»¬é€šè¿‡`ajax`è¯·æ±‚è¡¨æ ¼æ•°æ®æ—¶ï¼Œå¾ˆå¤šé€»è¾‘éƒ½æ˜¯é€šç”¨çš„ã€‚æ¯”å¦‚`loading`çš„çŠ¶æ€çš„å¤„ç†ï¼Œé”™è¯¯ä¿¡æ¯çš„å¤„ç†ï¼Œç¿»é¡µçš„å¤„ç†ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›é€»è¾‘æŠ½è±¡æˆä¸€ä¸ªå…¬å…±çš„`Hook`ã€‚ä¸åŒçš„`api`ï¼Œä½œä¸ºè‡ªå®šä¹‰`Hook`çš„å‚æ•°ã€‚
ä¸‹é¢æ˜¯ä¸€ä¸ªæ•°æ®è¯·æ±‚è‡ªå®šä¹‰`Hook`çš„ä¾‹å­ï¼š
![2019-09-15-21-27-29-2019915](http://images.zyy1217.com/2019-09-15-21-27-29-2019915.png)

å¦‚ä½•ä½¿ç”¨ï¼Ÿä»è‡ªå®šä¹‰Hookå‘å¤–æš´éœ²ä¸€äº›stateï¼Œå’ŒsetStateã€‚å½“pageå‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¼šé‡æ–°è¯·æ±‚æ•°æ®ã€‚
![2019-09-15-21-27-44-2019915](http://images.zyy1217.com/2019-09-15-21-27-44-2019915.png)


## ğŸš€å…¶ä»–API
### useContext
æ¥æ”¶ä¸€ä¸ª`context`å¯¹è±¡ï¼Œå¹¶è¿”å›å½“å‰çš„`context`çš„å€¼ã€‚`useContext`å¯ä»¥è®¢é˜…`context`çš„å˜åŒ–ã€‚ä½†æ˜¯ä»ç„¶éœ€è¦ä¸Šå±‚ç»„ä»¶ä½¿ç”¨`<MyContext.Provider>`æ¥ä¸ºä¸‹å±‚ç»„ä»¶æä¾›`context`ã€‚

![2019-09-15-21-28-41-2019915](http://images.zyy1217.com/2019-09-15-21-28-41-2019915.png)

### useReducer
`useReducer`æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œ`reducer`å‡½æ•°ï¼Œ`initialArg`åˆå§‹å€¼ï¼Œ`init`æƒ°æ€§åˆå§‹å€¼å‡½æ•°ã€‚`reducer`å‡½æ•°å’Œ`Redux`çš„`reducer`ç±»ä¼¼ï¼Œæ¥æ”¶`state`ï¼Œä»¥åŠ`action`ã€‚è¿”å›æ›´æ–°åçš„`state`ã€‚å¦‚æœä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œ`init`(initialArg)å°†ä½œä¸ºåˆå§‹å€¼ã€‚
`useReducer`åœ¨å¤æ‚åœºæ™¯ä¸‹æ¯”`useState`æ›´é€‚ç”¨ã€‚

#### æŒ‡å®šåˆå§‹state
`useReducer`çš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æŒ‡å®šåˆå§‹çš„`state`
#### æƒ°æ€§åˆå§‹åŒ–
å¦‚æœæŒ‡å®š`useReducer`çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œ`useReducer`çš„åˆå§‹å€¼ä¼šè¢«è®¾ç½®ä¸º`init`(`initialArg`)

![2019-09-15-21-44-18-2019915](http://images.zyy1217.com/2019-09-15-21-44-18-2019915.png)

#### è·³è¿‡dispatch
å¦‚æœ`ReducerHook`çš„è¿”å›çš„`state`ä¸å½“å‰`state`ç›¸åŒï¼ŒReactå°†è·³è¿‡å­ç»„ä»¶çš„æ¸²æŸ“åŠ`effect`çš„æ‰§è¡Œã€‚
#### ğŸŒ°ä¾‹å­
åœ¨è‡ªå®šä¹‰`Hook`çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨äº†å¤šä¸ª`useState`è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œå½“å‡ºç°å¤§é‡çŠ¶æ€æ—¶ï¼Œ`useState`ä¼šä½¿å¾—é€»è¾‘å˜å¾—å¾ˆå¤æ‚ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨`useReducer`ç®¡ç†å¤šä¸ª`state`ï¼Œä¹Ÿå¯å‘å­ç»„ä»¶ä¼ é€’`dispatch`ï¼Œè€Œä¸æ˜¯å›è°ƒå‡½æ•°ã€‚
ä¸‹é¢æ˜¯å°†è‡ªå®šä¹‰`Hook`ä¸­ï¼Œè¯·æ±‚æ•°æ®è‡ªå®šä¹‰`Hook`çš„ä¾‹å­ï¼Œæ”¹é€ æˆ`useReducer`çš„æ–¹æ³•ã€‚

![2019-09-15-21-45-39-2019915](http://images.zyy1217.com/2019-09-15-21-45-39-2019915.png)

### useCallback
useCallbackæ¥æ”¶å›è°ƒå‡½æ•°å’Œä¾èµ–æ•°ç»„ä½œä¸ºå‚æ•°ã€‚useCallbackä¼šè¿”å›memoizedå‡½æ•°ã€‚å½“ä¾èµ–é¡¹æ”¹å˜çš„æ—¶å€™ï¼Œä¼šè¿”å›çš„æ–°çš„memoizedå‡½æ•°ã€‚
![2019-09-15-21-46-10-2019915](http://images.zyy1217.com/2019-09-15-21-46-10-2019915.png)


### useMemo
useMemoå’ŒuseCallbackç±»ä¼¼ã€‚useMemoä¼šè¿”å›memoizedå€¼ã€‚å½“ä¾èµ–é¡¹æ”¹å˜æ—¶ï¼Œä¼šé‡æ–°è®¡ç®—memoizedå€¼ã€‚

![2019-09-15-21-46-30-2019915](http://images.zyy1217.com/2019-09-15-21-46-30-2019915.png)

### useRef
useRefé™¤äº†è·å–domèŠ‚ç‚¹çš„åŠŸèƒ½å¤–ï¼ŒuseRefçš„currentå±æ€§ï¼Œå¯ä»¥æ–¹ä¾¿ä¿å­˜ä»»ä½•å¯å˜å€¼ã€‚useRefæ¯ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼Œéƒ½ä¼šè¿”å›åŒä¸€ä¸ªrefå¯¹è±¡ã€‚
è®¾æƒ³ä¸‹é¢ğŸ‘‡è¿™ç§æƒ…å†µ, ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œç”±äºtimerå‘ç”Ÿäº†å˜åŒ–ï¼Œæˆ‘ä»¬ä¼šæ°¸è¿œæ— æ³•æ¸…é™¤å®šæ—¶å™¨ã€‚
![2019-09-15-21-46-52-2019915](http://images.zyy1217.com/2019-09-15-21-46-52-2019915.png)


å¦‚æœæƒ³è¦åœ¨æ›´æ–°åï¼Œä¾ç„¶å¯ä»¥æ¸…é™¤å®šæ—¶å™¨ï¼Œå¯ä»¥å°†timerï¼Œä¿å­˜åˆ°useRefçš„currentå±æ€§ä¸Š


![2019-09-15-21-47-02-2019915](http://images.zyy1217.com/2019-09-15-21-47-02-2019915.png)


### useLayoutEffect
![2019-09-15-21-47-27-2019915](http://images.zyy1217.com/2019-09-15-21-47-27-2019915.png)
ï¼ˆçº¢åœˆä¸­æ˜¯åŒæ­¥çš„æ“ä½œï¼‰
useLayoutEffectå’ŒuseEffectç±»ä¼¼ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ï¼š

- useEffectï¼Œä½¿ç”¨useEffectä¸ä¼šé˜»å¡æµè§ˆå™¨çš„é‡ç»˜
- useLayoutEffect, ä½¿ç”¨useLayoutEffectï¼Œä¼šé˜»å¡æµè§ˆå™¨çš„é‡ç»˜ã€‚å¦‚æœä½ éœ€è¦æ‰‹åŠ¨çš„ä¿®æ”¹Domï¼Œæ¨èä½¿ç”¨useLayoutEffectã€‚å› ä¸ºå¦‚æœåœ¨useEffectä¸­æ›´æ–°Domï¼ŒuseEffectä¸ä¼šé˜»å¡é‡ç»˜ï¼Œç”¨æˆ·å¯èƒ½ä¼šçœ‹åˆ°å› ä¸ºæ›´æ–°å¯¼è‡´çš„é—ªçƒï¼Œ
![2019-09-15-21-47-49-2019915](http://images.zyy1217.com/2019-09-15-21-47-49-2019915.png)



## ğŸš—å‚è€ƒ

- [30åˆ†é’Ÿç²¾é€šReact Hooks](https://juejin.im/post/5be3ea136fb9a049f9121014)
- [ğŸŒŸHOOKS(ææ¡ˆ)](https://www.reactjscn.com/docs/hooks-intro.html)
- [ç²¾è¯»ã€Šæ€ä¹ˆç”¨ React Hooks é€ è½®å­ã€‹](https://juejin.im/post/5bf20ce6e51d454a324dd0e6#heading-12)
- [æ·±å…¥æµ…å‡º React Hooks](https://juejin.im/post/5cf475d66fb9a07ea944594e#heading-15)
- [ğŸŒŸA Complete Guide to useEffect](https://overreacted.io/a-complete-guide-to-useeffect/)
- [ğŸŒŸMaking setInterval Declarative with React Hooks](https://overreacted.io/making-setinterval-declarative-with-react-hooks/)
- [Reactâ€™s useCallback and useMemo Hooks By Example](https://nikgrozev.com/2019/04/07/reacts-usecallback-and-usememo-hooks-by-example/)
